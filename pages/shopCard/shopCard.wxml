<!--index.wxml-->
<view class="container">
  <!-- 推荐商品列表 -->
  <view wx:if="{{goodsList.length>0}}">
    <block wx:for="{{goodsList}}" wx:key="{{index}}" wx:for-item="item" wx:for-index="index">
      <view class="title flex flex_m width94">
        <image data-check="{{item.store.check}}" data-index="{{index}}" bindtap="setShopCheck" wx:if="{{item.store.check}}" class="check" src="../../image/check.png"></image>
        <text data-check="{{item.store.check}}" data-index="{{index}}" bindtap="setShopCheck" wx:else class="nocheck box_zing check"></text>
        <text> {{item.store.store_name}} <text class="./iconfont/iconarrow-right-copy:before icon" style="font-size:30rpx;margin:auto 0"></text></text>

      </view>
      <view class="width94" style="background:#fff; border-radius: 18rpx;">
        <view class="dealis  flex" wx:for="{{item.goods}}" wx:for-item="value" wx:for-index="ind" wx:key='{{ind}}'>
          <image data-check="{{value.check}}" data-ind="{{ind}}" data-index="{{index}}" bindtap="setShopCheck" wx:if="{{value.check}}" class="check flex_nosize" src="../../image/check.png"></image>
          <text data-check="{{value.check}}" data-ind="{{ind}}" data-index="{{index}}" bindtap="setShopCheck" wx:else class="nocheck box_zing check flex_nosize"></text>
          <image class="goodsImg flex_nosize" src="{{value.goods_thumb}}"></image>
          <view class="box_right" style=" margin: 0 0 0 6rpx;">
            <text class="delGoods fs_10" data-id="{{value.cart_id}}" catchtap="delGoods">删除</text>
            <text style="width:70%" class="goodsName fs_14 clamp_2">{{value.goods_name}}</text>
            <text class="remark fs_12 clamp_1 tc">134号牛油果绿  L</text>
            <text class="price">￥{{value.goods_price}}</text>
            <view class="count flex">
              <text data-skuId="{{value.sku_id}}" data-id="{{value.cart_id}}" data-type="odd" catchtap="addOdd" data-num="{{value.goods_num}}" class="text odd tc fs_13">-</text>
              <text class="text fs_12 tc">{{value.goods_num}}</text>
              <text data-skuId="{{value.sku_id}}" data-id="{{value.cart_id}}" data-type="add" catchtap="addOdd" data-num="{{value.goods_num}}" class="text add tc fs_13">+</text>
            </view>
          </view>
        </view>
      </view>

    </block>
  </view>

  <view wx:else>
    <view class="noGoods flex tc">
      <image src="../../image/card.png"></image>
      <text class="fs_19">购物车空空如也~</text>
    </view>
    <view class="fs_19 tc recommended">好物推荐</view>
    <view class="shop_list flex_wrap" style="width:92%">
      <block wx:for="{{shopList}}" wx:key="{{index}}">
        <one_shop data-path="/pages/goodsDealis/goodsDealis" data-id="{{item.id}}" data-skuId="{{item.sku_id}}" catchtap="toRouter" class="{{index%2==0?'oneList ml':'oneList'}}" obj="{{item}}"></one_shop>
      </block>
    </view>
    <view class="noMore" wx:if="{{!isPullDownRefresh}}">没有更多数据了...</view>
  </view>

  <view wx:if="{{goodsList.length>0}}" class="bottom flex">
    <view catchtap="selectAll" class="flex flex_m" style="width:30%">
      <image wx:if="{{allCheck}}" class="check" src="../../image/check.png"></image>
      <text wx:else class="nocheck box_zing check"></text>
      <text class="fcb2">全选</text>
    </view>
    <view class="flex flex_m right">
      <text class="flex_wrap">总计:</text>
      <text style="color:#F18E1E;margin:0 0 0 8rpx;">￥{{totalPrice}}</text>
      <view data-path="/pages/goodSettle/goodSettle" bindtap="toRouter" class="settle tc">结算({{count}})</view>
    </view>
  </view>
</view>